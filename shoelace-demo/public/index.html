<html class="sl-theme-dark">
  <head>
    <title>Shoelace Demo</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.13.1/cdn/themes/dark.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.13.1/cdn/shoelace-autoloader.js"
      type="module"
    ></script>
    <script src="reload.js"></script>

    <script defer>
      const state = {
        prefersDark: window.matchMedia('(prefers-color-scheme: dark)').matches
      };
      document.addEventListener('alpine:init', () => {
        Alpine.data('state', () => state);
      });

      function configureWatches(watch) {
        watch('prefersDark', dark => {
          const el = document.documentElement;
          el.className = dark ? 'sl-theme-dark' : 'sl-theme-light';
        });
      }
    </script>

    <!-- <script type="module">
      const form = document.querySelector('.input-validation-required');

      // Wait for controls to be defined before attaching form listeners.
      //TODO: It's ridiculous that we have to do this.
      await Promise.all([
        customElements.whenDefined('sl-button'),
        customElements.whenDefined('sl-checkbox'),
        customElements.whenDefined('sl-input'),
        customElements.whenDefined('sl-option'),
        customElements.whenDefined('sl-select'),
        customElements.whenDefined('sl-textarea')
      ]).then(() => {
        form.addEventListener('submit', event => {
          event.preventDefault();
          alert('All fields are valid!');
        });
      });
    </script> -->
  </head>
  <body x-data="state" x-init="configureWatches($watch)">
    <!-- When this button is clicked,
         an HTTP GET request is sent to /version.
         The text it returns replaces the innerHTML
         of the element with id "version". -->
    <sl-button hx-get="/version" hx-target="#version">
      Get Bun Version
    </sl-button>
    <div id="version"></div>

    <sl-switch
      size="large"
      :value="prefersDark"
      x-on:sl-change="prefersDark = $event.target.checked"
    >
      Dark Mode
    </sl-switch>
    <div>prefersDark = <span x-text="prefersDark"></span></div>

    <!-- <form class="input-validation-required">
      <sl-input name="name" label="Name" required></sl-input>
      <br />
      <sl-select label="Favorite Animal" clearable required>
        <sl-option value="birds">Birds</sl-option>
        <sl-option value="cats">Cats</sl-option>
        <sl-option value="dogs">Dogs</sl-option>
        <sl-option value="other">Other</sl-option>
      </sl-select>
      <br />
      <sl-textarea name="comment" label="Comment" required></sl-textarea>
      <br />
      <sl-checkbox required>Check me before submitting</sl-checkbox>
      <br /><br />
      <sl-button type="submit" variant="primary">Submit</sl-button>
    </form> -->
  </body>
</html>
